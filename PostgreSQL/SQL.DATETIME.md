# Даты: основные типы

B Postgres существует несколько типов данных:

* **timestamp  [ without time zone ]** - дата и время (без часового пояса) - от 4713 до н.э.до 294276 н.э.	
* **timestamp with time zone** - дата и время (с часовым поясом) - от 4713 до н.э. до 294276 н.э.
* **date** - дата (без времени суток) - от 4713 до н.э.	5874897 н.э.	
* **time [ without time zone ]** - время суток (без даты) - от 0:00:00 до 24:00:00
* **time with time zone** - только время суток (с часовым поясом) - от 00:00:00+145 до	24:00:00-1459
* **interval**  - временной интервал

## TIMESTAMP 
**Timestamp** — наиболее распространённый тип данных, так как он содержит и дату, и время, а также используется в любых логах событий, временных рядах и в большинстве системных таблиц.

Согласно стандарту ISO, значение выглядит как **"2019-07-14 01:35:44.702165+00"**, где перечислены через точку год-месяц-день, время и часовой пояс.

Для получения текущего значения даты и времени в Postgres используются функции *CURRENT_TIMESTAMP* (есть в стандарте SQL) и *NOW()* (есть в большинстве баз данных).
```sql
SELECT NOW()
```
Можно видеть разницу
```sql
SELECT CURRENT_TIMESTAMP
```
## TIMESTAMP WITH TIME ZONE
**Timestamp with time zone** позволяет хранить сведения о часовом поясе, что может быть удобно при анализе географически распределённых временных данных для единообразия хранения.
```sql
show timezone
```
В результате вы увидите GMT — это наиболее частая установка по умолчанию для баз данных. Что он обозначает, можно посмотреть [здесь](https://ru.wikipedia.org/wiki/%D0%A1%D1%80%D0%B5%D0%B4%D0%BD%D0%B5%D0%B5_%D0%B2%D1%80%D0%B5%D0%BC%D1%8F_%D0%BF%D0%BE_%D0%93%D1%80%D0%B8%D0%BD%D0%B2%D0%B8%D1%87%D1%83).

Bаше время в каком-нибудь часовом поясе, например, в Москве.
```sql
SELECT now() at time zone 'Europe/Moscow'
```
Давайте узнаем, сколько сейчас времени в другом регионе, например Лос-Анджелесе. Напишите запрос, который выведет текущие время и дату в часовом поясе Лос-Анджелеса ("America/Los_Angeles"). Столбец в выдаче — now (время и дата в нужном часовом поясе).
```sql
SELECT now() at time zone 'America/Los_Angeles' AS now
```
## DATE
Tип timestamp (with/without time zone) можно легко перевести в соответствующую дату, используя синтаксис
```sql
'timestamp_column'::date
```
И наоборот, тип date преобразуется в timestamp (дата и 00:00:00) с помощью
```sql
'date_column'::timestamp
```
Для получения текущей даты можно использовать
```sql
SELECT CURRENT_DATE
```
или
```sql
SELECT now()::date
```
Предположим, у нас есть дата и время какого-то события и мы хотим посмотреть, к какой дате оно относится для Москвы и для UTC. Используйте следующий подзапрос и выведите дату в ts в Московском часовом поясе и в поясе UTC.
```sql
WITH x AS 
(
SELECT '2018-12-31 21:00:00+00'::timestamp WITH time zone ts
)
SELECT * FROM x
```
Столбцы в выдаче: dt_msk (дата в московском часовом поясе), dt_utc (дата в UTC).:
```sql 
WITH x AS
(SELECT '2018-12-31 21:00:00+00'::timestamp WITH time zone ts
)
SELECT
    (ts at time zone 'Europe/Moscow')::date dt_msk,
    (ts)::date dt_utc
FROM x
```
## INTERVAL
**Interval** — тип данных, позволяющий хранить разницу между двумя временными метками. 

Интервалы хранят данные в трёх отдельных полях — месяцах, днях, секундах. Это сделано из-за того, что количество дней в месяце и часов в дне может быть разным. Пример значения такого типа: "195 days -10:52:23.563955".